<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Entry Operator Login Screen</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>

<body>
    <!-- page -->
    <main class="mx-auto flex min-h-screen w-full items-center justify-center bg-gray-900 text-white">
        <!-- component -->
        <section class="flex w-[30rem] flex-col space-y-10">
            <div class="text-center text-4xl font-medium">Data Entry Operator Portal</div>

            
            <!-- Email input (increased width) -->
            <div class="w-full transform border-b-2 bg-transparent text-lg duration-300 focus-within:border-indigo-500">
                <input id="dataEntryUsername" type="text" placeholder="Enter Your Username"
                    class="w-96 border-none bg-transparent outline-none placeholder:italic focus:outline-none" />
            </div>

            <!-- Password input (increased width) -->
            <div class="w-full transform border-b-2 bg-transparent text-lg duration-300 focus-within:border-indigo-500">
                <input id="dataEntryPassword" type="password" placeholder="Enter Your Password"
                    class="w-96 border-none bg-transparent outline-none placeholder:italic focus:outline-none" />
            </div>
            <!-- 4 digit branch-ID  -->
            <div class="w-full transform border-b-2 bg-transparent text-lg duration-300 focus-within:border-indigo-500">
                <input  id="dataEntrySecurityCode" type="password" placeholder="Enter Branch Code"
                    class="w-96 border-none bg-transparent outline-none placeholder:italic focus:outline-none" />
            </div>

            <button id="DataEntrylgnBtn"
             class="transform rounded-sm bg-indigo-600 py-2 font-bold duration-300 hover:bg-indigo-400">
                LOG IN
            </button>
            <a href="#" class="transform text-center font-semibold text-gray-500 duration-300 hover:text-gray-300">FORGOT
                PASSWORD?</a>
           
        </section>
    </main>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            if (window.location.pathname.includes('DataEntryOperatorLogin.html')) {
                async function login() {
                    try {
                        const username = document.getElementById('dataEntryUsername').value;
                        const password = document.getElementById('dataEntryPassword').value;
                        const securityCode = document.getElementById('dataEntrySecurityCode').value;

                        console.log('Sending login request with:', { username, password, securityCode});

                        const response = await fetch('/api/dataOperator/login', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify({ username, password, securityCode})
                        });

                        console.log('Received response:', response);

                        if (!response.ok) {
                            throw new Error('Network response was not ok');
                        }

                        const result = await response.json();
                        console.log('Parsed response JSON:', result);

                        if (result.loginSuccess) {
                            window.location.href = '/DataEntryOperatorDashboard.html';
                        } else {
                            alert('Invalid credentials! Please try again.');
                        }
                    } catch (error) {
                        console.error('Error while logging in:', error);
                    }
                }
                document.getElementById('DataEntrylgnBtn').addEventListener('click', login);
            }
        });
    </script>


</body>

</html>
